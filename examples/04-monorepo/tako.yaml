# Monorepo Example
# Services in subdirectories with different build contexts

project:
  name: monorepo
  version: 1.0.0

servers:
  prod:
    host: ${SERVER_HOST}
    user: root
    sshKey: ~/.ssh/id_ed25519

environments:
  production:
    servers:
      - prod
    services:
      web:
        build: ./web
        port: 3000
        proxy:
          domains:
            - monorepo.${SERVER_HOST}.sslip.io
          email: admin@example.com
        env:
          NODE_ENV: production
          API_URL: http://api:4000

      api:
        build: ./api
        port: 4000
        replicas: 2
        env:
          NODE_ENV: production
